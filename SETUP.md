# ðŸš€ SongBuddy Backend Auto Setup

This guide will help you set up the SongBuddy backend automatically on any system.

## âš¡ Quick Setup (Automated)

### **macOS/Linux:**
```bash
# Clone the repository
git clone https://github.com/mohammadaminrez/songbuddy-backend.git
cd songbuddy-backend

# Run the auto setup script
./setup.sh
```

### **Windows:**
```cmd
REM Clone the repository
git clone https://github.com/mohammadaminrez/songbuddy-backend.git
cd songbuddy-backend

REM Run the auto setup script
setup.bat
```

## ðŸŽ¯ What the Auto Setup Does

The setup script automatically:

- âœ… **Checks prerequisites** (Node.js, Git)
- âœ… **Installs Node.js** (if not present)
- âœ… **Installs all dependencies** (`npm install`)
- âœ… **Creates environment file** (`.env`)
- âœ… **Generates secure JWT secret**
- âœ… **Gets your system's IP address**
- âœ… **Tests the setup** (starts server and checks health)

## ðŸ“‹ Manual Setup (Alternative)

If you prefer to set up manually:

### **1. Prerequisites**
- **Node.js** 18+ ([Download](https://nodejs.org/))
- **Git** ([Download](https://git-scm.com/))
- **MongoDB** (optional, for full features)

### **2. Installation**
```bash
# Clone repository
git clone https://github.com/mohammadaminrez/songbuddy-backend.git
cd songbuddy-backend

# Install dependencies
npm install

# Copy environment file
cp env.example .env

# Edit .env with your settings
nano .env  # or your preferred editor
```

### **3. Configuration**
Edit `.env` file with your settings:

```env
# Database (optional for simple setup)
MONGODB_URI=mongodb://localhost:27017/songbuddy

# JWT Secret (auto-generated by setup script)
JWT_SECRET=your_generated_secret_here

# Server
PORT=3000
NODE_ENV=development

# Spotify OAuth (get from https://developer.spotify.com/dashboard)
SPOTIFY_CLIENT_ID=your_spotify_client_id
SPOTIFY_CLIENT_SECRET=your_spotify_client_secret
SPOTIFY_REDIRECT_URI=http://localhost:3000/api/auth/spotify/callback
```

## ðŸš€ Running the Backend

### **Simple Mode (No Database):**
```bash
npm run dev:simple
```

### **Full Mode (With Database):**
```bash
npm run dev
```

### **Production:**
```bash
npm run build
npm start
```

## ðŸ§ª Testing the Setup

After setup, test these endpoints:

- **Health Check:** `http://localhost:3000/health`
- **API Test:** `http://localhost:3000/api/test`

```bash
# Test with curl
curl http://localhost:3000/health
curl http://localhost:3000/api/test
```

## ðŸ“± Connecting Flutter App

Update your Flutter app's `BackendApiService`:

```dart
// For local development
static const String baseUrl = 'http://YOUR_SYSTEM_IP:3000';

// Find your system's IP:
// macOS/Linux: ifconfig | grep "inet " | grep -v 127.0.0.1
// Windows: ipconfig
```

## ðŸ”§ Troubleshooting

### **Node.js Issues:**
```bash
# Clear npm cache
npm cache clean --force

# Reinstall dependencies
rm -rf node_modules package-lock.json
npm install
```

### **Port Issues:**
```bash
# Find what's using port 3000
lsof -i :3000  # macOS/Linux
netstat -ano | findstr :3000  # Windows

# Change port in .env file
PORT=3001
```

### **MongoDB Issues:**
```bash
# For local MongoDB
brew services start mongodb-community  # macOS
sudo systemctl start mongod           # Linux

# Or use MongoDB Atlas (cloud database)
```

## ðŸ“š Available Scripts

```bash
npm run dev:simple    # Start simple server (no database)
npm run dev          # Start full server (with database)
npm run build        # Build for production
npm start           # Start production server
npm test            # Run tests
npm run lint        # Run linting
```

## ðŸŽµ Next Steps

1. **Configure Spotify OAuth** - Get credentials from [Spotify Developer Dashboard](https://developer.spotify.com/dashboard)
2. **Test Flutter Connection** - Update Flutter app with your system's IP
3. **Build Features** - Add authentication, social features, real-time capabilities

## ðŸ’¡ Tips

- **Development:** Use `npm run dev:simple` for quick testing
- **Production:** Use `npm run build && npm start`
- **Docker:** Use Docker for consistent deployment
- **Cloud:** Deploy to Vercel, Railway, or Heroku

---

**Happy coding! ðŸŽµ**

For issues or questions, check the [main README](README.md) or open an issue on GitHub.
